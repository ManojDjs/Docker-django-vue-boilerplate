"use strict";var e=require("primevue/ripple"),t=require("primevue/utils"),i=require("vue");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s={name:"Carousel",emits:["update:page"],props:{value:null,page:{type:Number,default:0},numVisible:{type:Number,default:1},numScroll:{type:Number,default:1},responsiveOptions:Array,orientation:{type:String,default:"horizontal"},verticalViewPortHeight:{type:String,default:"300px"},contentClass:String,containerClass:String,indicatorsContentClass:String,circular:{type:Boolean,default:!1},autoplayInterval:{type:Number,default:0},showNavigators:{type:Boolean,default:!0},showIndicators:{type:Boolean,default:!0},prevButtonProps:{type:null,default:null},nextButtonProps:{type:null,default:null}},isRemainingItemsAdded:!1,data(){return{id:t.UniqueComponentId(),remainingItems:0,d_numVisible:this.numVisible,d_numScroll:this.numScroll,d_oldNumScroll:0,d_oldNumVisible:0,d_oldValue:null,d_page:this.page,totalShiftedItems:this.page*this.numScroll*-1,allowAutoplay:!!this.autoplayInterval,d_circular:this.circular||this.allowAutoplay,swipeThreshold:20}},watch:{page(e){this.d_page=e},circular(e){this.d_circular=e},numVisible(e,t){this.d_numVisible=e,this.d_oldNumVisible=t},numScroll(e,t){this.d_oldNumScroll=t,this.d_numScroll=e},value(e){this.d_oldValue=e}},mounted(){let e=!1;if(this.createStyle(),this.calculatePosition(),this.responsiveOptions&&this.bindDocumentListeners(),this.isCircular()){let t=this.totalShiftedItems;0===this.d_page?t=-1*this.d_numVisible:0===t&&(t=-1*this.value.length,this.remainingItems>0&&(this.isRemainingItemsAdded=!0)),t!==this.totalShiftedItems&&(this.totalShiftedItems=t,e=!0)}!e&&this.isAutoplay()&&this.startAutoplay()},updated(){const e=this.isCircular();let t=!1,i=this.totalShiftedItems;if(this.autoplayInterval&&this.stopAutoplay(),this.d_oldNumScroll!==this.d_numScroll||this.d_oldNumVisible!==this.d_numVisible||this.d_oldValue.length!==this.value.length){this.remainingItems=(this.value.length-this.d_numVisible)%this.d_numScroll;let n=this.d_page;0!==this.totalIndicators&&n>=this.totalIndicators&&(n=this.totalIndicators-1,this.$emit("update:page",n),this.d_page=n,t=!0),i=n*this.d_numScroll*-1,e&&(i-=this.d_numVisible),n===this.totalIndicators-1&&this.remainingItems>0?(i+=-1*this.remainingItems+this.d_numScroll,this.isRemainingItemsAdded=!0):this.isRemainingItemsAdded=!1,i!==this.totalShiftedItems&&(this.totalShiftedItems=i,t=!0),this.d_oldNumScroll=this.d_numScroll,this.d_oldNumVisible=this.d_numVisible,this.d_oldValue=this.value,this.$refs.itemsContainer.style.transform=this.isVertical()?`translate3d(0, ${i*(100/this.d_numVisible)}%, 0)`:`translate3d(${i*(100/this.d_numVisible)}%, 0, 0)`}e&&(0===this.d_page?i=-1*this.d_numVisible:0===i&&(i=-1*this.value.length,this.remainingItems>0&&(this.isRemainingItemsAdded=!0)),i!==this.totalShiftedItems&&(this.totalShiftedItems=i,t=!0)),!t&&this.isAutoplay()&&this.startAutoplay()},beforeUnmount(){this.responsiveOptions&&this.unbindDocumentListeners(),this.autoplayInterval&&this.stopAutoplay()},methods:{step(e,i){let n=this.totalShiftedItems;const s=this.isCircular();if(null!=i)n=this.d_numScroll*i*-1,s&&(n-=this.d_numVisible),this.isRemainingItemsAdded=!1;else{n+=this.d_numScroll*e,this.isRemainingItemsAdded&&(n+=this.remainingItems-this.d_numScroll*e,this.isRemainingItemsAdded=!1);let t=s?n+this.d_numVisible:n;i=Math.abs(Math.floor(t/this.d_numScroll))}s&&this.d_page===this.totalIndicators-1&&-1===e?(n=-1*(this.value.length+this.d_numVisible),i=0):s&&0===this.d_page&&1===e?(n=0,i=this.totalIndicators-1):i===this.totalIndicators-1&&this.remainingItems>0&&(n+=-1*this.remainingItems-this.d_numScroll*e,this.isRemainingItemsAdded=!0),this.$refs.itemsContainer&&(t.DomHandler.removeClass(this.$refs.itemsContainer,"p-items-hidden"),this.$refs.itemsContainer.style.transform=this.isVertical()?`translate3d(0, ${n*(100/this.d_numVisible)}%, 0)`:`translate3d(${n*(100/this.d_numVisible)}%, 0, 0)`,this.$refs.itemsContainer.style.transition="transform 500ms ease 0s"),this.totalShiftedItems=n,this.$emit("update:page",i),this.d_page=i},calculatePosition(){if(this.$refs.itemsContainer&&this.responsiveOptions){let e=window.innerWidth,t={numVisible:this.numVisible,numScroll:this.numScroll};for(let i=0;i<this.responsiveOptions.length;i++){let n=this.responsiveOptions[i];parseInt(n.breakpoint,10)>=e&&(t=n)}if(this.d_numScroll!==t.numScroll){let e=this.d_page;e=parseInt(e*this.d_numScroll/t.numScroll),this.totalShiftedItems=t.numScroll*e*-1,this.isCircular()&&(this.totalShiftedItems-=t.numVisible),this.d_numScroll=t.numScroll,this.$emit("update:page",e),this.d_page=e}this.d_numVisible!==t.numVisible&&(this.d_numVisible=t.numVisible)}},navBackward(e,t){(this.d_circular||0!==this.d_page)&&this.step(1,t),this.allowAutoplay=!1,e.cancelable&&e.preventDefault()},navForward(e,t){(this.d_circular||this.d_page<this.totalIndicators-1)&&this.step(-1,t),this.allowAutoplay=!1,e.cancelable&&e.preventDefault()},onIndicatorClick(e,t){let i=this.d_page;t>i?this.navForward(e,t):t<i&&this.navBackward(e,t)},onTransitionEnd(){this.$refs.itemsContainer&&(t.DomHandler.addClass(this.$refs.itemsContainer,"p-items-hidden"),this.$refs.itemsContainer.style.transition="",0!==this.d_page&&this.d_page!==this.totalIndicators-1||!this.isCircular()||(this.$refs.itemsContainer.style.transform=this.isVertical()?`translate3d(0, ${this.totalShiftedItems*(100/this.d_numVisible)}%, 0)`:`translate3d(${this.totalShiftedItems*(100/this.d_numVisible)}%, 0, 0)`))},onTouchStart(e){let t=e.changedTouches[0];this.startPos={x:t.pageX,y:t.pageY}},onTouchMove(e){e.cancelable&&e.preventDefault()},onTouchEnd(e){let t=e.changedTouches[0];this.isVertical()?this.changePageOnTouch(e,t.pageY-this.startPos.y):this.changePageOnTouch(e,t.pageX-this.startPos.x)},changePageOnTouch(e,t){Math.abs(t)>this.swipeThreshold&&(t<0?this.navForward(e):this.navBackward(e))},onIndicatorKeydown(e){switch(e.code){case"ArrowRight":this.onRightKey();break;case"ArrowLeft":this.onLeftKey();break;case"Home":this.onHomeKey(),e.preventDefault();break;case"End":this.onEndKey(),e.preventDefault();break;case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Tab":this.onTabKey()}},onRightKey(){const e=[...t.DomHandler.find(this.$refs.indicatorContent,".p-carousel-indicator")],i=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(i,i+1===e.length?e.length-1:i+1)},onLeftKey(){const e=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(e,e-1<=0?0:e-1)},onHomeKey(){const e=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(e,0)},onEndKey(){const e=[...t.DomHandler.find(this.$refs.indicatorContent,".p-carousel-indicator")],i=this.findFocusedIndicatorIndex();this.changedFocusedIndicator(i,e.length-1)},onTabKey(){const e=[...t.DomHandler.find(this.$refs.indicatorContent,".p-carousel-indicator")],i=e.findIndex((e=>t.DomHandler.hasClass(e,"p-highlight"))),n=t.DomHandler.findSingle(this.$refs.indicatorContent,'.p-carousel-indicator > button[tabindex="0"]'),s=e.findIndex((e=>e===n.parentElement));e[s].children[0].tabIndex="-1",e[i].children[0].tabIndex="0"},findFocusedIndicatorIndex(){const e=[...t.DomHandler.find(this.$refs.indicatorContent,".p-carousel-indicator")],i=t.DomHandler.findSingle(this.$refs.indicatorContent,'.p-carousel-indicator > button[tabindex="0"]');return e.findIndex((e=>e===i.parentElement))},changedFocusedIndicator(e,i){const n=[...t.DomHandler.find(this.$refs.indicatorContent,".p-carousel-indicator")];n[e].children[0].tabIndex="-1",n[i].children[0].tabIndex="0",n[i].children[0].focus()},bindDocumentListeners(){this.documentResizeListener||(this.documentResizeListener=e=>{this.calculatePosition(e)},window.addEventListener("resize",this.documentResizeListener))},unbindDocumentListeners(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)},startAutoplay(){this.interval=setInterval((()=>{this.d_page===this.totalIndicators-1?this.step(-1,0):this.step(-1,this.d_page+1)}),this.autoplayInterval)},stopAutoplay(){this.interval&&clearInterval(this.interval)},createStyle(){this.carouselStyle||(this.carouselStyle=document.createElement("style"),this.carouselStyle.type="text/css",document.body.appendChild(this.carouselStyle));let e=`\n            #${this.id} .p-carousel-item {\n                flex: 1 0 ${100/this.d_numVisible}%\n            }\n        `;if(this.responsiveOptions){let t=[...this.responsiveOptions];t.sort(((e,t)=>{const i=e.breakpoint,n=t.breakpoint;let s=null;return s=null==i&&null!=n?-1:null!=i&&null==n?1:null==i&&null==n?0:"string"==typeof i&&"string"==typeof n?i.localeCompare(n,void 0,{numeric:!0}):i<n?-1:i>n?1:0,-1*s}));for(let i=0;i<t.length;i++){let n=t[i];e+=`\n                    @media screen and (max-width: ${n.breakpoint}) {\n                        #${this.id} .p-carousel-item {\n                            flex: 1 0 ${100/n.numVisible}%\n                        }\n                    }\n                `}}this.carouselStyle.innerHTML=e},isVertical(){return"vertical"===this.orientation},isCircular(){return this.value&&this.d_circular&&this.value.length>=this.d_numVisible},isAutoplay(){return this.autoplayInterval&&this.allowAutoplay},firstIndex(){return this.isCircular()?-1*(this.totalShiftedItems+this.d_numVisible):-1*this.totalShiftedItems},lastIndex(){return this.firstIndex()+this.d_numVisible-1},ariaSlideNumber(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.slideNumber.replace(/{slideNumber}/g,e):void 0},ariaPageLabel(e){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.pageLabel.replace(/{page}/g,e):void 0}},computed:{totalIndicators(){return this.value?Math.max(Math.ceil((this.value.length-this.d_numVisible)/this.d_numScroll)+1,0):0},backwardIsDisabled(){return this.value&&(!this.circular||this.value.length<this.d_numVisible)&&0===this.d_page},forwardIsDisabled(){return this.value&&(!this.circular||this.value.length<this.d_numVisible)&&(this.d_page===this.totalIndicators-1||0===this.totalIndicators)},containerClasses(){return["p-carousel-container",this.containerClass]},contentClasses(){return["p-carousel-content ",this.contentClass]},indicatorsContentClasses(){return["p-carousel-indicators p-reset",this.indicatorsContentClass]},ariaSlideLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.slide:void 0},ariaPrevButtonLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.prevPageLabel:void 0},ariaNextButtonLabel(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.nextPageLabel:void 0}},directives:{ripple:n(e).default}};const a=["id"],l={key:0,class:"p-carousel-header"},o=["aria-live"],r=["disabled","aria-label"],d=["aria-hidden","aria-label","aria-roledescription"],c=["disabled","aria-label"],h=["tabindex","aria-label","aria-current","onClick"],u={key:1,class:"p-carousel-footer"};!function(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===i&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}}("\n.p-carousel {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-carousel-content {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    overflow: auto;\n}\n.p-carousel-prev,\n.p-carousel-next {\n    -ms-flex-item-align: center;\n        align-self: center;\n    -webkit-box-flex: 0;\n        -ms-flex-positive: 0;\n            flex-grow: 0;\n    -ms-flex-negative: 0;\n        flex-shrink: 0;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    overflow: hidden;\n    position: relative;\n}\n.p-carousel-container {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.p-carousel-items-content {\n    overflow: hidden;\n    width: 100%;\n}\n.p-carousel-items-container {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n}\n.p-carousel-indicators {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: horizontal;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: row;\n            flex-direction: row;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n    -ms-flex-wrap: wrap;\n        flex-wrap: wrap;\n}\n.p-carousel-indicator > button {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n\n/* Vertical */\n.p-carousel-vertical .p-carousel-container {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n}\n.p-carousel-vertical .p-carousel-items-container {\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    height: 100%;\n}\n\n/* Keyboard Support */\n.p-items-hidden .p-carousel-item {\n    visibility: hidden;\n}\n.p-items-hidden .p-carousel-item.p-carousel-item-active {\n    visibility: visible;\n}\n"),s.render=function(e,t,n,s,m,p){const b=i.resolveDirective("ripple");return i.openBlock(),i.createElementBlock("div",{id:m.id,class:i.normalizeClass(["p-carousel p-component",{"p-carousel-vertical":p.isVertical(),"p-carousel-horizontal":!p.isVertical()}]),role:"region"},[e.$slots.header?(i.openBlock(),i.createElementBlock("div",l,[i.renderSlot(e.$slots,"header")])):i.createCommentVNode("",!0),i.createElementVNode("div",{class:i.normalizeClass(p.contentClasses)},[i.createElementVNode("div",{class:i.normalizeClass(p.containerClasses),"aria-live":m.allowAutoplay?"polite":"off"},[n.showNavigators?i.withDirectives((i.openBlock(),i.createElementBlock("button",i.mergeProps({key:0,type:"button",class:["p-carousel-prev p-link",{"p-disabled":p.backwardIsDisabled}],disabled:p.backwardIsDisabled,"aria-label":p.ariaPrevButtonLabel,onClick:t[0]||(t[0]=(...e)=>p.navBackward&&p.navBackward(...e))},n.prevButtonProps),[i.createElementVNode("span",{class:i.normalizeClass(["p-carousel-prev-icon pi",{"pi-chevron-left":!p.isVertical(),"pi-chevron-up":p.isVertical()}])},null,2)],16,r)),[[b]]):i.createCommentVNode("",!0),i.createElementVNode("div",{class:"p-carousel-items-content",style:i.normalizeStyle([{height:p.isVertical()?n.verticalViewPortHeight:"auto"}]),onTouchend:t[2]||(t[2]=(...e)=>p.onTouchEnd&&p.onTouchEnd(...e)),onTouchstart:t[3]||(t[3]=(...e)=>p.onTouchStart&&p.onTouchStart(...e)),onTouchmove:t[4]||(t[4]=(...e)=>p.onTouchMove&&p.onTouchMove(...e))},[i.createElementVNode("div",{ref:"itemsContainer",class:"p-carousel-items-container",onTransitionend:t[1]||(t[1]=(...e)=>p.onTransitionEnd&&p.onTransitionEnd(...e))},[p.isCircular()?(i.openBlock(!0),i.createElementBlock(i.Fragment,{key:0},i.renderList(n.value.slice(-1*m.d_numVisible),((t,s)=>(i.openBlock(),i.createElementBlock("div",{key:s+"_scloned",class:i.normalizeClass(["p-carousel-item p-carousel-item-cloned",{"p-carousel-item-active":-1*m.totalShiftedItems===n.value.length+m.d_numVisible,"p-carousel-item-start":0===s,"p-carousel-item-end":n.value.slice(-1*m.d_numVisible).length-1===s}])},[i.renderSlot(e.$slots,"item",{data:t,index:s})],2)))),128)):i.createCommentVNode("",!0),(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(n.value,((t,n)=>(i.openBlock(),i.createElementBlock("div",{key:n,class:i.normalizeClass(["p-carousel-item",{"p-carousel-item-active":p.firstIndex()<=n&&p.lastIndex()>=n,"p-carousel-item-start":p.firstIndex()===n,"p-carousel-item-end":p.lastIndex()===n}]),role:"group","aria-hidden":p.firstIndex()>n||p.lastIndex()<n||void 0,"aria-label":p.ariaSlideNumber(n),"aria-roledescription":p.ariaSlideLabel},[i.renderSlot(e.$slots,"item",{data:t,index:n})],10,d)))),128)),p.isCircular()?(i.openBlock(!0),i.createElementBlock(i.Fragment,{key:1},i.renderList(n.value.slice(0,m.d_numVisible),((t,s)=>(i.openBlock(),i.createElementBlock("div",{key:s+"_fcloned",class:i.normalizeClass(["p-carousel-item p-carousel-item-cloned",{"p-carousel-item-active":0===m.totalShiftedItems,"p-carousel-item-start":0===s,"p-carousel-item-end":n.value.slice(0,m.d_numVisible).length-1===s}])},[i.renderSlot(e.$slots,"item",{data:t,index:s})],2)))),128)):i.createCommentVNode("",!0)],544)],36),n.showNavigators?i.withDirectives((i.openBlock(),i.createElementBlock("button",i.mergeProps({key:1,type:"button",class:["p-carousel-next p-link",{"p-disabled":p.forwardIsDisabled}],disabled:p.forwardIsDisabled,"aria-label":p.ariaNextButtonLabel,onClick:t[5]||(t[5]=(...e)=>p.navForward&&p.navForward(...e))},n.nextButtonProps),[i.createElementVNode("span",{class:i.normalizeClass(["p-carousel-prev-icon pi",{"pi-chevron-right":!p.isVertical(),"pi-chevron-down":p.isVertical()}])},null,2)],16,c)),[[b]]):i.createCommentVNode("",!0)],10,o),p.totalIndicators>=0&&n.showIndicators?(i.openBlock(),i.createElementBlock("ul",{key:0,ref:"indicatorContent",class:i.normalizeClass(p.indicatorsContentClasses),onKeydown:t[6]||(t[6]=(...e)=>p.onIndicatorKeydown&&p.onIndicatorKeydown(...e))},[(i.openBlock(!0),i.createElementBlock(i.Fragment,null,i.renderList(p.totalIndicators,((e,t)=>(i.openBlock(),i.createElementBlock("li",{key:"p-carousel-indicator-"+t.toString(),class:i.normalizeClass(["p-carousel-indicator",{"p-highlight":m.d_page===t}])},[i.createElementVNode("button",{class:"p-link",type:"button",tabindex:m.d_page===t?"0":"-1","aria-label":p.ariaPageLabel(t+1),"aria-current":m.d_page===t?"page":void 0,onClick:e=>p.onIndicatorClick(e,t)},null,8,h)],2)))),128))],34)):i.createCommentVNode("",!0)],2),e.$slots.footer?(i.openBlock(),i.createElementBlock("div",u,[i.renderSlot(e.$slots,"footer")])):i.createCommentVNode("",!0)],10,a)},module.exports=s;
