{"remainingRequest":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/src/views/Dairy.vue?vue&type=style&index=0&id=164b0389&scoped=true&lang=css","dependencies":[{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/src/views/Dairy.vue","mtime":1613417957928},{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/css-loader/dist/cjs.js","mtime":1604800558316},{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1604800559128},{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/postcss-loader/src/index.js","mtime":1604800558736},{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/cache-loader/dist/cjs.js","mtime":1604800558196},{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/vue-loader-v16/dist/index.js","mtime":1604800559128}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5EYWlyeXsKICAgIHRleHQtYWxpZ246Y2VudGVyOwp9Cg=="},{"version":3,"sources":["/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/src/views/Dairy.vue"],"names":[],"mappings":";AAuOA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrB","file":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/src/views/Dairy.vue","sourceRoot":"","sourcesContent":["<template>\n    <div class=\"Dairy\">\n        <h1>Diary</h1>\n        <Toast position=\"center\" />\n        <div class=\"p-p-3 card\">\n    <Button type=\"Button\" icon=\"pi pi-book\" label=\"Add Dairy\" v-on:click=\"edit_mode_off\" class=\"p-mr-2\" />\n    <Button type=\"Button\" icon=\"pi pi-pencil\" label=\"Exisitng Dairy\" v-on:click=\"edit_mode\"  class=\"p-button-danger\"/>\n        </div>\n        <div class=\" p-shadow-5\" v-if=\"edit=='OFF'\">\n            <div v-for='(item,index) in Dairy_Answers' :key='index'>\n            <Card style=\"width:100%\">\n            <template #header>\n            </template>\n            <template #title>\n              <h5>  {{ item.Text }} </h5>\n            </template>\n            <template subtitle>\n            </template>\n            <template #content>\n                <Textarea v-model=\"item.answer\" :autoResize=\"true\" rows=\"5\" cols=\"50\" />\n            </template>\n            <template #footer>\n                <Button icon=\"pi pi-check\" label=\"Save\" v-on:click=\"submit_dairy(item.id,item.answer)\" />\n               \n            </template>\n            </Card>\n            </div>\n        </div>\n        <div class=\" p-shadow-5\" v-if=\"edit=='ON'\">\n        <ScrollPanel style=\"width: 100%; height: 900%\">\n            <div v-for='(item,index) in Exisitng_dairy' :key='index'>\n            <Card style=\"width:100%\">\n            <template #header>\n            </template>\n            <template #title>\n                {{ item.Date }}\n            </template>\n            <template subtitle>\n                <h1>manoj</h1>\n            </template>\n            <template #content>\n                <p>{{item.Dairy_Text }}</p>\n            </template>\n            <template #footer>\n                <Button icon=\"pi pi-check\" label=\"Edit\" v-on:click=\"update_dairy(item.id,item.Dairy_label,item.Dairy_Text)\"/>\n                <Button icon=\"pi pi-trash\" label=\"Delete\" v-on:click=\"delete_dairy(item.id)\" class=\"p-button-secondary\" style=\"margin-left: .5em\" />\n            </template>\n            </Card>\n         </div>\n        </ScrollPanel>\n            <Dialog header=\"Edit Below Dairy\" v-model:visible=\"display\" style=\"width:90%\">\n                <h1>Question</h1>\n                 {{ editqsn}}\n                <h1>Your dairy</h1>\n                <Textarea v-model=\"edittext\" :autoResize=\"true\" rows=\"5\" cols=\"50\" />\n                <Divider/>\n                <Button icon=\"pi pi-save\" label=\"Submit\" class=\"p-button-secondary\" style=\"margin-left: .5em\" v-on:click=\"finalupdate\" />\n          </Dialog>\n\n        </div>\n        \n    </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nimport Json from \"@/assets/endpoints.json\"\nimport axios from 'axios'\nexport default {\n     data(){\n        return{\n            \n            dairy_label_link:Json[0]['Course']['DAIRYLABLE'],\n            dairy_link:Json[0]['Course']['DAIRY'],\n            server:Json[0]['Course']['SERVER'],\n            dairy_update_link:Json[0]['Course']['DAIRYUPDATE'],\n            course_content:[],\n            video_link:'',\n            Dairy_text:'',\n            Dairy:'',\n            Dairy_labels:[],\n            Dairy_Answers:[],\n            Exisitng_dairy:[],\n            edit:\"OFF\",\n            display:false,\n            edittext:\"\",\n            editqsn:\"\",\n            editid:null\n            \n         \n        }\n    },\n    methods:{\n        delete_dairy(id){\n            const headers={\n                'Authorization': 'Token'+' '+this.token\n                    }\n            axios.delete(this.server+this.dairy_update_link+id,{'headers':headers}\n            ).then(resp=>{\n                console.log(resp.status)\n                this.get_existing_dairy()\n                 \n                \n            })\n        },\n         create_object(){\n                     var i;\n                // console.log(this.get_questions.data) checking questions\n                    for(i=0;i<this.Dairy_labels.length;i++){\n                    \n                        \n                        this.Dairy_Answers.push({\n                            \"id\":this.Dairy_labels[i]['id'],\n                            \"answer\": \"\",\n                            \n                            \"Text\": this.Dairy_labels[i]['Text'],\n                            \"DairyNumber\":this.Dairy_labels[i]['DairyNumber'],\n                            \n                        })\n                      }\n                    //   console.log(this.Dairy_Answers)\n                      },\n        get_dairy_labels(){\n             const headers={\n                'Authorization': 'Token'+' '+this.token\n                    }\n            axios.get(this.server+this.dairy_label_link,{'headers':headers}\n            ).then(resp=>{\n                // console.log(\"im in dairy labels\")\n                // console.log(resp.data)\n                this.Dairy_labels=resp.data\n                this.create_object()\n                \n            })\n        },\n        get_existing_dairy(){\n            const headers={\n                'Authorization': 'Token'+' '+this.token\n                    }\n            axios.get(this.server+this.dairy_link,{'headers':headers}\n            ).then(resp=>{\n                this.Exisitng_dairy=resp.data\n                \n            })\n        },\n        submit_dairy(id,text){\n            const headers={\n                'Authorization': 'Token'+' '+this.token\n                    }\n             axios.post(this.server+this.dairy_link,\n              {\"Dairy_label\":id,\n                \"Dairy_Text\": text,\n                \"Wrote_by\": this.uid\n                  \n              },\n              {'headers':headers})\n            .then(resp => {\n                    if(resp.status==201){\n                        \n                        this.$toast.add({severity:'success', summary: 'Dairy submited ', detail:'successfully , submitted your dairy', life: 3000}),\n                        this.get_existing_dairy()\n                        this.edit='ON'\n                        \n\n                    }\n                   })\n        },\n       \n        update_dairy(id,qsn,txt){\n            this.display=true\n            this.edittext=txt\n            this.editqsn=qsn\n            this.editid=id\n\n        },\n        finalupdate(){\n             const headers={\n                'Authorization': 'Token'+' '+this.token\n                    }\n             axios.put(this.server+this.dairy_update_link+this.editid,\n            {\n                \"id\":this.editid,\n                \"Dairy_label\":this.editqsn,\n                \"Dairy_Text\": this.edittext,\n                \"Wrote_by\": this.uid\n                \n            },{'headers':headers})\n          .then(resp => {\n              if(resp.status==200){\n                  this.$toast.add({severity:'success', summary: 'updated ', detail:'successfully , updated your dairy', life: 3000})\n                 this.edittext=\"\",\n                 this.editqsn=\"\",\n                 this.editid=null,\n\n                 this.get_existing_dairy()\n                 this.display=false\n              }\n          })\n\n        },\n        edit_mode(){\n            this.edit=\"ON\"\n\n        },\n        edit_mode_off(){\n            this.edit=\"OFF\"\n            this.Dairy_labels=[]\n            this.Dairy_Answers=[]\n            this.get_dairy_labels()\n            \n\n        }\n    },\n    computed:{\n    ...mapState([\n      'token',\n      'user',\n      'uid',\n      'heading',\n      'height',\n      'course',\n    ])\n     },\n     created(){\n         this.get_dairy_labels()\n         this.get_existing_dairy()\n     }\n    \n}\n</script>\n\n<style scoped>\n.Dairy{\n    text-align:center;\n}\n</style>"]}]}