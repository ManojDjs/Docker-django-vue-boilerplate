{"remainingRequest":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/babel-loader/lib/index.js!/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/eslint-loader/index.js??ref--13-0!/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/src/store/index.js","dependencies":[{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/src/store/index.js","mtime":1606154839766},{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/cache-loader/dist/cjs.js","mtime":1604800558196},{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/babel-loader/lib/index.js","mtime":1604800558176},{"path":"/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/node_modules/eslint-loader/index.js","mtime":1604800558428}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCB7IGNyZWF0ZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IGNyZWF0ZVN0b3JlKHsKICBzdGF0ZTogewogICAgc3RhdHVzOiAnJywKICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSB8fCAnJywKICAgIHVzZXI6IHt9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGF1dGhfcmVxdWVzdDogZnVuY3Rpb24gYXV0aF9yZXF1ZXN0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdsb2FkaW5nJzsKICAgIH0sCiAgICBhdXRoX3N1Y2Nlc3M6IGZ1bmN0aW9uIGF1dGhfc3VjY2VzcyhzdGF0ZSwgdG9rZW4sIHVzZXIpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJ3N1Y2Nlc3MnOwogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgICBzdGF0ZS51c2VyID0gdXNlcjsKICAgIH0sCiAgICBhdXRoX2Vycm9yOiBmdW5jdGlvbiBhdXRoX2Vycm9yKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICdlcnJvcic7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gJyc7CiAgICAgIHN0YXRlLnRva2VuID0gJyc7CiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXR0b2tlbjogZnVuY3Rpb24gZ2V0dG9rZW4oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnRva2VuOwogICAgfSwKICAgIGlzTG9nZ2VkSW46IGZ1bmN0aW9uIGlzTG9nZ2VkSW4oc3RhdGUpIHsKICAgICAgcmV0dXJuICEhc3RhdGUudG9rZW47CiAgICB9LAogICAgYXV0aFN0YXR1czogZnVuY3Rpb24gYXV0aFN0YXR1cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuc3RhdHVzOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICBjb25zb2xlLmxvZyh1c2VyKTsKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgfQogICAgICB9OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdCgnYXV0aF9yZXF1ZXN0Jyk7CiAgICAgICAgYXhpb3MucG9zdCgnaHR0cDovLzEyNy4wLjAuMTo4MDAwL2FwaS9hY2NvdW50cy9sb2dpbi8nLCB7CiAgICAgICAgICB1c2VybmFtZTogdXNlci5lbWFpbCwKICAgICAgICAgIHBhc3N3b3JkOiB1c2VyLnBhc3N3b3JkCiAgICAgICAgfSwgY29uZmlnKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEpOwogICAgICAgICAgdmFyIHRva2VuID0gcmVzcC5kYXRhLnRva2VuOwogICAgICAgICAgdmFyIHVzZXIgPSByZXNwLmRhdGEudXNlcjsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHRva2VuKTsKICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSB0b2tlbjsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgdG9rZW4sIHVzZXIpOwogICAgICAgICAgcmVzb2x2ZShyZXNwKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBjb21taXQoJ2F1dGhfZXJyb3InKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYyKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIGNvbW1pdCgnbG9nb3V0Jyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXTsKICAgIH0KICB9LAogIG1vZHVsZXM6IHt9Cn0pOw=="},{"version":3,"sources":["/home/ubuntu/PycharmProjects/Docker-django-vue-boilerplate/src/store/index.js"],"names":["createStore","axios","state","status","token","localStorage","getItem","user","mutations","auth_request","auth_success","auth_error","logout","getters","gettoken","isLoggedIn","authStatus","actions","login","commit","console","log","config","headers","Promise","resolve","reject","post","username","email","password","then","resp","data","setItem","defaults","common","catch","err","removeItem","modules"],"mappings":"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","sourcesContent":["import { createStore } from 'vuex';\nimport axios from 'axios'\n\nexport default createStore({\n\n  state: {\n    status: '',\n    token: localStorage.getItem('token') || '',\n    user : {}\n  },\n  mutations: {\n    auth_request(state){\n      state.status = 'loading'\n    },\n    auth_success(state, token, user){\n      state.status = 'success'\n      state.token = token\n      state.user = user\n    },\n    auth_error(state){\n      state.status = 'error'\n    },\n    logout(state){\n      state.status = ''\n      state.token = ''\n    },\n  },\n  getters:{\n    gettoken:state=>state.token,\n    isLoggedIn: state => !!state.token,\n  authStatus: state => state.status,\n    \n  },\n  actions: {\n    login({commit}, user){\n      console.log(user)\n      const config={\n        headers:{\n          'content-type':'application/json'\n                  }\n                   }\n      return new Promise((resolve, reject) => {\n        commit('auth_request')\n        axios.post('http://127.0.0.1:8000/api/accounts/login/',{username:user.email,password:user.password},config)\n        .then(resp => {\n          console.log(resp.data)\n          const token = resp.data.token\n          const user = resp.data.user\n          localStorage.setItem('token', token)\n          axios.defaults.headers.common['Authorization'] = token\n          commit('auth_success', token, user)\n          resolve(resp)\n        })\n        .catch(err => {\n          commit('auth_error')\n          localStorage.removeItem('token')\n          reject(err)\n        })\n      })\n  },\n  logout({commit}){\n    \n      commit('logout')\n      localStorage.removeItem('token')\n      delete axios.defaults.headers.common['Authorization']\n      \n    \n  }\n\n  \n},\n  modules: { \n  }\n})\n"]}]}